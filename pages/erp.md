---
layout: page-fullwidth
show_meta: false
title: "Event Related Potentials"
subheadline: ""
teaser: "This tutorial will explain how to extract Event Related Potentials "
header:
   image_fullwidth: ""
permalink: "/erp/"
---
<div class="row">
<div class="medium-4 medium-push-8 columns" markdown="1">
<div class="panel radius" markdown="1">
**Table of Contents**
{: #toc }
*  TOC
{:toc}
</div>
</div><!-- /.medium-4.columns -->


<div class="medium-8 medium-pull-4 columns" markdown="1">

# Goals:

* Readers should know which ERP to use in which situation
* Be able to code an algorithm that will extract P300 ERP features for a speller type program

# Terms/Topics to be defined/covered ahead of this article:

* Basics of Machine Learning (features, classifiers, unsupervised, supervised)

# 1) Feature Extraction
### __1.1 What is feature extraction__
Raw neural data, recorded from an EEG or other BCI device, includes a broad set of information about brain activity and some noise from external interference. Even with minimal noise, the complexity of the data in its raw form can be difficult to interpret. Feature extraction is the process of identifying and extracting meaningful information from raw neural data. This reduces the noise as well as the volume of data, making it easier to identify patterns and improves the accuracy of the BCI.

Some feature extraction methods are unsupervised. They do not use example data labelled with features to learn from. They simply extract the most significant information on their own by discarding similarities and focusing on the differences in the data. These methods include Principal Component Analysis (PCA), Wavelet transform, and more. Other methods like Common Spatial Patterns (CSP) are supervised. They require a set of labelled data to determine the specific patterns you would like to extract.

### __1.2 Which features to extract__
The choice of feature extraction methods will depend on several design choices including the type of brain processes being captured. In this document, we will focus on BCIs based on event-related potentials (ERPs).

The feature extraction step for ERP-based BCIs is fairly simple. The first step is to extract epochs. An epoch is a chunk of an EEG signal with a specified length and synchronised with an event (i.e. the presentation of a stimulus). Statistics of these epochs are then computed to extract features. For example, one may  simply compute the mean voltage recorded at each electrode site during the epoch. This feature is usually sufficient for identifying ERPs.

# 2) Event-Related Potential

### __2.1 What is an event-related potential__
An event-related potential, or ERP, is the electrophysiological response in the brain
to a specific motor or cognitive event (e.g. a stimulus). This stimulus can be almost
anything: a flashing light, a surprising sound, a blinking eyeld etc. In all cases, a bci
using ERP's will try to isolate and identify these small, event-related responses.

### __2.2 How to record an ERP with EEG__

A scalp-recorded EEG records the joint activity of millions of neurons making it almost impossible
to isolate each and every signal that relates to an ERP. The best we can do is look at the 
overall voltage changes. We call a change that appears to reflect a specific psychological 
process an _ERP component_.

An ERP waveform (Figure 1) contains the overall voltage changes over time starting at the onset
of the stimulus. It contains several wave peaks, which could be relevant ERP components. Each positive (P)
and negative (N) peak is followed by a number (i.e. N1, P2, N2, P3, etc.) representing the distance from
the stimulus onset (0 ms). This is the most common naming convention.

__Insert Figure 1. ERP waveform with a typical P3 wave. From (Hoffman et al., 2008)__

### __2.3 How to use ERP's__
BCIs using ERPs are easier to use as they require very little training time. They can be used to monitor
attention and fatigue by studying how the brain reacts to certain external events. With visual stimuli, an
ERP-based BCI can be used as an input device with a relatively quick reaction time compared to other BCI's. 
For more information see: [An Introduction to the Event-Related Potential Technique By Steven J. Luck](https://mitpress.mit.edu/books/introduction-event-related-potential-technique-0)

### __2.4 How to generate an ERP__
Any sensory, motor or cognitive event can trigger an ERP, but most BCI's using ERPs are
sensory-based and use either visual or auditory stimuli. Both stimuli are more easily generated by a 
computer than other sensory input. Also, the visual cortex has been studied for decades, allowing us
to better interpret visual stimuli on the brain. Sensorimotor stimuli are also used in some BCIs while olfactory and gustatory
stimuli are rarely used.

### __2.5 The P3 family of ERP's__

One of the easiest approaches to make the brain generate an ERP is by developing experiments following the 
_oddball paradigm_. In these experiments, participants are shown a repetitive sequence of standard stimuli (e.g. pictures of cars)
interleaved, rarely by a deviant stimulus (e.g. a picture of a face). Our brain reacts to these "odd" stimuli by generating a large P3 or (P300) ERP component. The P3 wave peak occurs around 300-600 ms after the odd stimuli is presented. It is also called the P300
as when it was discovered it was believed the peak alsways occurred as 300 ms. 

This document will mainly focus on the P3 wave but there are other important ERP components used in BCI research, including the N2pc
(related to the attention), N4 or N400 (related to language) and the error related negativity (ERN). For further details on those compenents see: [An Introduction to the Event-Related Potential Technique By Steven J. Luck](https://mitpress.mit.edu/books/introduction-event-related-potential-technique-0)

The characteristics or the P3 make it very suitable for devloping BCIs. First of all, the P3 response is easy to measure with EEG, hence being suitable for non-invasive BCIs. Moreover, a P3-based BCI requires less than 10 minutes of training and it works with the majority of subjects, including those with severe neurological diseases.

### __2.6 History of P3-based BCIs__

The P3 is a ERP component reported by Sutton in 1967 but the first P3-based BCI was developed by Farwell and Donchin in 1988 to provide
a speller (virtual keyboard) for paralysed people. Users would look at a matrix of letters on a screen and were asked to focuson the letter
they wanted to input. The rows and columns of letters would flash randomly and whenever the letter of interest was highlighted it would 
appear to the brain as an "oddball" stimulus. the stimulus would be detected as a P3 ERP component and the BCI would output the corresponding letter.

After this first P3-based BCI was introduced, not much attention was given to this technology. According to Donchin et al. (2000) there were no P3-based BCI peer-reviewed papers from 1988 to 2000. The next five years saw only a modest increase in P3-based BCI articles, which often relies on offline analyses, such as analyzing other groups' data from the 2003 BCI Data Analysis Competition. 

In the last decade, P3-based BCIs have emerged as one of the main BCI categories due to several appealing features. It's straightforward to use, relatively fast, effective for most sers, and requires almost no training. P3-based BCIs can be used for a wide range of applications including controlling virtual keyboards, controlling a mouse, supporting decision-making, and so on.

# 3) How to record, process, and classify an ERP


</div> <!-- end of table section -->
